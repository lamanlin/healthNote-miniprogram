"use strict";const e=require("../../common/vendor.js"),n={__name:"index",setup(n){function s(){e.index.showModal({title:"温馨提示",content:"亲，授权微信登录后才能正常使用小程序功能",success(n){n.confirm?e.index.getUserProfile({desc:"注册用户信息使用",lang:"zh_CN",success:n=>{e.index.login({provider:"weixin",success:function(s){e.Es.callFunction({name:"user",data:{code:s.code,avatarUrl:n.userInfo.avatarUrl,gender:n.userInfo.gender,nickName:n.userInfo.nickName}}).then((n=>{e.index.setStorageSync("userInfo",JSON.stringify(n.result)),e.index.redirectTo({url:"/pages/home/index",success:()=>{console.log(2)}})}))}})}}):e.index.showToast({title:"您取消了授权",duration:2e3})}})}return(n,o)=>({a:e.o(s)})}};wx.createPage(n);
